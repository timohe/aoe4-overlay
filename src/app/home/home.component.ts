import { Component, OnInit } from '@angular/core';
import { Router } from '@angular/router';
import { electron } from 'process';
import Tesseract from 'tesseract.js';
import { desktopCapturer, screen } from 'electron';
const fs = (window as any).require('fs');
import { remote } from 'electron';
import { HttpClient, HttpClientModule } from '@angular/common/http';
import { Observable, throwError } from 'rxjs';
import { catchError, retry } from 'rxjs/operators';
import { PlayerApiResponse } from '../types';

@Component({
	selector: 'app-home',
	templateUrl: './home.component.html',
	styleUrls: ['./home.component.scss']
})
export class HomeComponent implements OnInit {
	ocrResult = null;
	playerName = null;
	elo = null;
	screenshot = null;
	png = null;
	// eslint-disable-next-line max-len
	base64 = `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`;


	constructor(private router: Router, private httpClient: HttpClient) {
	}
	ngOnInit(): void {
	}

	saveScreenshots() {
		desktopCapturer.getSources({
			types: ['screen'], thumbnailSize: {
				width: 2560,
				height: 1440,
			}
		})
			.then(sources => {
				this.screenshot = sources[0].thumbnail.toPNG(); // The image to display the screenshot
				fs.writeFile('/Users/thegn/Desktop/test.png', this.screenshot, err => {
					if (err) {
						console.error(err);
						return;
					}
					//file written successfully
				});
			});
	}
	recognizeImage() {
		this.playerName = 'undefined';
		const imageBuffer = Buffer.from(this.base64, 'base64');
		Tesseract.recognize(
			imageBuffer,
			'eng',
			{ logger: m => console.log(m) }
		).then(({ data: { text } }) => {
			console.log(text);
			this.playerName = text;
			// this.ocrResult = text;
			// this.ocrResult = 'solaire';
			// this.getPlayerStats(this.ocrResult);
		});
	}

	closeApp() {
		const win = remote.getCurrentWindow();
		win.close();
	}


	getPlayerStats(playerName: string) {
		this.apiGetPlayerStats(playerName).subscribe((response) => {
			console.log(`This is the data`);
			this.elo = response.items[0].elo;
			this.playerName = response.items[0].userName;
		});
	}

	apiGetPlayerStats(playerName) {
		return this.httpClient.post<PlayerApiResponse>(`https://api.ageofempires.com/api/ageiv/Leaderboard`, {
			region: '7',
			versus: 'players',
			matchType: 'unranked',
			teamSize: '3v3',
			searchPlayer: playerName,
			page: 1,
			count: 100
		}).pipe();
	}
}
